webpackJsonp([1],{NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var s=n("VU/8")({name:"app"},o,!1,function(t){n("PkQ5")},null,null).exports,c=n("/ocq"),u=n("NYxO"),a={name:"ProductItem",props:["product"],computed:Object(u.d)(["basket"]),methods:Object(u.c)(["addProductToBasket"])},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"product-list__product"},[t._v(t._s(t.product.title)+" (£"+t._s(t.product.price)+") "),n("button",{on:{click:function(e){t.addProductToBasket(t.product)}}},[t._v("Add to basket")])])},staticRenderFns:[]},d={name:"ProductPage",components:{ProductItem:n("VU/8")(a,i,!1,null,null,null).exports},computed:Object(u.d)(["products","basketTotal","numProductsInBasket"]),created:function(){this.$store.dispatch("retrieveProducts")}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("section",[e("ul",{staticClass:"product-list"},this._l(this.products,function(t){return e("product-item",{key:t.id,tag:"li",attrs:{product:t}})})),this._v(" "),e("strong",[this._v("You have "+this._s(this.numProductsInBasket)+" product(s) in "),e("router-link",{attrs:{to:{name:"Basket"}}},[this._v("Basket")]),this._v(" for a total of £"+this._s(this.basketTotal))],1)])},staticRenderFns:[]},p=n("VU/8")(d,l,!1,null,null,null).exports,m={name:"BasketItem",props:["product"],computed:Object(u.d)(["basket"]),methods:Object(u.c)(["increaseProductQuantity","decreaseProductQuantity","removeProductFromBasket"])},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",[t._v("\n  "+t._s(t.product.title)+" (£"+t._s(t.product.price)+") Qty: "+t._s(t.product.quantity)+"\n  "),n("button",{on:{click:function(e){t.increaseProductQuantity(t.product)}}},[t._v("+")]),t._v(" "),n("button",{on:{click:function(e){t.decreaseProductQuantity(t.product)}}},[t._v("-")]),t._v(" "),n("button",{on:{click:function(e){t.removeProductFromBasket(t.product)}}},[t._v("Remove")])])},staticRenderFns:[]},k={name:"Basket",components:{BasketItem:n("VU/8")(m,f,!1,null,null,null).exports},computed:Object(u.d)(["basket","basketTotal"])},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("section",[e("router-link",{attrs:{to:{name:"ProductPage"}}},[this._v("Go to Products Page")]),this._v(" "),e("ul",{staticClass:"basket"},this._l(this.basket,function(t){return e("basket-item",{key:t.id,tag:"li",attrs:{product:t}})})),this._v(" "),e("strong",[this._v("Basket Total: £"+this._s(this.basketTotal))])],1)},staticRenderFns:[]},h=n("VU/8")(k,v,!1,null,null,null).exports;r.a.use(c.a);var _=new c.a({routes:[{path:"/",name:"ProductPage",component:p},{path:"/basket",name:"Basket",component:h}]}),b=n("Xxa5"),P=n.n(b),y=n("exGp"),B=n.n(y),O=n("//Fk"),T=n.n(O),g=[{id:"A",title:"MOO The SlimCase",price:8.99},{id:"B",title:"MOO Hardcover Notebook",price:14.99},{id:"C",title:"MOO Softcover Journal",price:5.75}];function x(){return T.a.resolve(g)}var F={state:{products:[]},getters:{products:function(t){return t.products}},mutations:{setProducts:function(t,e){var n=e.products;t.products=n}},actions:{retrieveProducts:function(t){var e=this,n=t.commit;return B()(P.a.mark(function t(){var r;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:r=t.sent,n("setProducts",{products:r});case 4:case"end":return t.stop()}},t,e)}))()}}},Q=n("woOf"),w=n.n(Q),I=n("Dd8w"),j=n.n(I),q={state:{basket:[]},getters:{basket:function(t){return t.basket},basketTotal:function(t){return t.basket.reduce(function(t,e){return t+e.price*e.quantity},0).toFixed(2)},numProductsInBasket:function(t){return t.basket.length}},mutations:{addToBasket:function(t,e){t.basket.some(function(t){var n=t.id;return e.id===n})||t.basket.push(j()({},e,{quantity:1}))},modifyProductQuantity:function(t,e){var n,r=e.product,o=e.modifier,s=t.basket.find(function(t){var e=t.id;return r.id===e});try{s.quantity+o>0?(n=o,s.quantity+=n):R(s.id,t.basket)}catch(t){console.error("You can't modify the quantity of a product that is not in the basket")}},removeFromBasket:function(t,e){R(e.id,t.basket)}},actions:{addProductToBasket:function(t,e){(0,t.commit)("addToBasket",M(e))},increaseProductQuantity:function(t,e){(0,t.commit)("modifyProductQuantity",{product:M(e),modifier:1})},decreaseProductQuantity:function(t,e){(0,t.commit)("modifyProductQuantity",{product:M(e),modifier:-1})},removeProductFromBasket:function(t,e){(0,t.commit)("removeFromBasket",j()({},e))}}};function M(t){return w()({},t)}function R(t,e){var n=e.findIndex(function(e){var n=e.id;return t===n});n>-1&&e.splice(n,1)}r.a.use(u.b);var $=new u.a({modules:{productsModule:F,basketModule:q}});r.a.config.productionTip=!1,new r.a({el:"#app",store:$,router:_,template:"<App/>",components:{App:s}})},PkQ5:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.1d3e800ec9f43e9a8699.js.map